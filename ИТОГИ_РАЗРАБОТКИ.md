# –ò—Ç–æ–≥–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: –¢—Ä–µ–Ω–∞–∂—ë—Ä –¥–∏–ª–µ—Ä–∞ –±–∞–∫–∫–∞—Ä–∞

## üìã –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**–ë–∞–∫–∫–∞—Ä–∞ –¢—Ä–µ–Ω–∞–∂—ë—Ä v5.9** - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –¥–∏–ª–µ—Ä–æ–≤ –∏–≥—Ä–µ –≤ –±–∞–∫–∫–∞—Ä–∞ –Ω–∞ –±–∞–∑–µ Godot 4.5.

---

## ‚ú® –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### üéÆ –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å

1. **–°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–¥–∞—á–∏ –∫–∞—Ä—Ç**
   - –ö–æ–ª–æ–¥–∞ –∏–∑ 52 –∫–∞—Ä—Ç —Å –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ–º
   - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç –∏–≥—Ä–æ–∫–∞ –∏ –±–∞–Ω–∫–∏—Ä–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –æ—á–∫–æ–≤ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –±–∞–∫–∫–∞—Ä–∞
   - –¢—Ä–µ—Ç—å—è –∫–∞—Ä—Ç–∞ (–ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –±–∞–∫–∫–∞—Ä–∞)

2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è**
   - –ù–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è –ø–æ–±–µ–¥–∞ (8-9)
   - –û–±—ã—á–Ω–∞—è –ø–æ–±–µ–¥–∞
   - –ù–∏—á—å—è (Tie)
   - –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**
   - –ü–æ–¥—Å—á—ë—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
   - –ü–æ–¥—Å—á—ë—Ç –æ—à–∏–±–æ–∫ –ø–æ —Ç–∏–ø–∞–º
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —Ñ–∞–π–ª

### üí∞ –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–≤–æ–∫ –∏ –≤—ã–ø–ª–∞—Ç

4. **PayoutPopup - –æ–∫–Ω–æ –≤—ã–ø–ª–∞—Ç**
   - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–µ–∫–æ–≤ —Ñ–∏—à–µ–∫ (–¥–æ 20 —Ñ–∏—à–µ–∫ –≤ —Å—Ç–µ–∫–µ)
   - 12 –Ω–æ–º–∏–Ω–∞–ª–æ–≤: 1, 5, 10, 25, 50, 100, 500, 1000, 5000, 25000, 100000, 500000
   - **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** —Å—Ç–µ–∫–æ–≤ (—Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ: –æ—Ç –±–æ–ª—å—à–µ–≥–æ –∫ –º–µ–Ω—å—à–µ–º—É)
   - **–ö–æ–º–ø–∞–∫—Ç–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞**: –≤—Å–µ–≥–¥–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–ª–Ω—ã–µ —Å—Ç–µ–∫–∏ (20+20+4, –∞ –Ω–µ 14+14+14+2)
   - **–ü—Ä–∞–≤–∏–ª–æ —É–¥–∞–ª–µ–Ω–∏—è**: –∫–ª–∏–∫ –ø–æ –ª—é–±–æ–º—É —Å—Ç–µ–∫—É –Ω–æ–º–∏–Ω–∞–ª–∞ —É–¥–∞–ª—è–µ—Ç —Ñ–∏—à–∫—É –∏–∑ **–ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ** (–ø—Ä–∞–≤–æ–≥–æ) —Å—Ç–µ–∫–∞
   - **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**:
     - 6 —Å–ª–æ—Ç–æ–≤ (96√ó336px) –¥–ª—è ‚â§6 —Å—Ç–µ–∫–æ–≤
     - 10 —Å–ª–æ—Ç–æ–≤ (57.6√ó201.6px) –ø—Ä–∏ >6 —Å—Ç–µ–∫–æ–≤ - —ç—Ñ—Ñ–µ–∫—Ç "–æ—Ç–¥–∞–ª–µ–Ω–∏—è –∫–∞–º–µ—Ä—ã"
     - –ù–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–µ–∫–æ–≤ –≤—Å–µ–≥–¥–∞ –Ω–∞ –æ–¥–Ω–æ–º —É—Ä–æ–≤–Ω–µ
   - **AtlasTexture —Å–∏—Å—Ç–µ–º–∞**: —Å—Ç–µ–∫–∏ —Ä–∞—Å—Ç—É—Ç –≤–≤–µ—Ä—Ö, –ø–æ–∫–∞–∑—ã–≤–∞—è —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—É—é —á–∞—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –≤—ã–ø–ª–∞—Ç—ã
   - –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å (–∫—Ä–∞—Å–Ω–∞—è/–∑–µ–ª—ë–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è)

5. **–õ–∏–º–∏—Ç—ã —Å—Ç–æ–ª–∞**
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ min/max —Å—Ç–∞–≤–∫–∏ –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –∑–æ–Ω
   - –û—Ç–¥–µ–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã –¥–ª—è Tie
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —à–∞–≥ —Å—Ç–∞–≤–∫–∏

6. **–ö–æ–º–∏—Å—Å–∏—è –±–∞–Ω–∫–∏—Ä–∞**
   - –†–∞—Å—á—ë—Ç 5% –∫–æ–º–∏—Å—Å–∏–∏ –ø—Ä–∏ –ø–æ–±–µ–¥–µ –±–∞–Ω–∫–∏—Ä–∞
   - –¢–æ—á–Ω—ã–µ –≤—ã–ø–ª–∞—Ç—ã –ø–æ –≤—Å–µ–º —Å—Ü–µ–Ω–∞—Ä–∏—è–º

### üéØ –†–µ–∂–∏–º –≤—ã–∂–∏–≤–∞–Ω–∏—è

7. **Survival Mode (–Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è)**
   - 7 –∂–∏–∑–Ω–µ–π (—Å–µ—Ä–¥–µ—á–∫–∏-—ç–º–æ–¥–∑–∏ –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞)
   - –ü–æ—Ç–µ—Ä—è –∂–∏–∑–Ω–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–π –æ—à–∏–±–∫–µ:
     - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
     - –û—à–∏–±–∫–∞ –≤ —Ä–∞–∑–¥–∞—á–µ —Ç—Ä–µ—Ç—å–µ–π –∫–∞—Ä—Ç—ã
     - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤—ã–ø–ª–∞—Ç–∞
   - –ö—Ä–∞—Å–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –º–∏–≥–∞–Ω–∏—è –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ –∂–∏–∑–Ω–∏
   - –°—á—ë—Ç—á–∏–∫ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —Ä–∞—É–Ω–¥–æ–≤
   - –≠–∫—Ä–∞–Ω Game Over —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ

### üåç –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

8. **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å**
   - –†—É—Å—Å–∫–∏–π —è–∑—ã–∫ (RU)
   - –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫ (EN)
   - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ª–µ—Ç—É
   - –í—Å–µ UI —ç–ª–µ–º–µ–Ω—Ç—ã –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω—ã

### üé® UI/UX

9. **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
   - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å—Ç–æ–ª–∞
   - –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
   - Toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞/–∏–Ω—Ñ–æ)
   - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º
   - –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –≤–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

```
–±–∞–∫–∫–∞—Ä–∞-5.9/
‚îú‚îÄ‚îÄ assets/              # –†–µ—Å—É—Ä—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ cards/          # –¢–µ–∫—Å—Ç—É—Ä—ã –∫–∞—Ä—Ç
‚îÇ   ‚îú‚îÄ‚îÄ chips/          # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–∏—à–µ–∫ –∏ —Å—Ç–µ–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ ui/             # UI —ç–ª–µ–º–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã/      # –°–∫—Ä–∏–Ω—à–æ—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ scenes/             # –°—Ü–µ–Ω—ã Godot
‚îÇ   ‚îú‚îÄ‚îÄ Game.tscn              # –ì–ª–∞–≤–Ω–∞—è —Å—Ü–µ–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ BetPopup.tscn          # –ü–æ–ø–∞–ø —Å—Ç–∞–≤–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ PayoutPopup.tscn       # –ü–æ–ø–∞–ø –≤—ã–ø–ª–∞—Ç (–ù–û–í–û–ï)
‚îÇ   ‚îú‚îÄ‚îÄ LimitsPopup.tscn       # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–º–∏—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ HelpPopup.tscn         # –°–ø—Ä–∞–≤–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ SurvivalModeUI.tscn    # UI —Ä–µ–∂–∏–º–∞ –≤—ã–∂–∏–≤–∞–Ω–∏—è (–ù–û–í–û–ï)
‚îÇ   ‚îî‚îÄ‚îÄ GameOverPopup.tscn     # –≠–∫—Ä–∞–Ω –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã (–ù–û–í–û–ï)
‚îî‚îÄ‚îÄ scripts/            # –°–∫—Ä–∏–ø—Ç—ã GDScript
    ‚îú‚îÄ‚îÄ GameController.gd      # –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
    ‚îú‚îÄ‚îÄ GamePhaseManager.gd    # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–∑–∞–º–∏ –∏–≥—Ä—ã
    ‚îú‚îÄ‚îÄ PayoutPopup.gd         # –õ–æ–≥–∏–∫–∞ –≤—ã–ø–ª–∞—Ç (–ù–û–í–û–ï)
    ‚îú‚îÄ‚îÄ SurvivalModeUI.gd      # –õ–æ–≥–∏–∫–∞ —Ä–µ–∂–∏–º–∞ –≤—ã–∂–∏–≤–∞–Ω–∏—è (–ù–û–í–û–ï)
    ‚îú‚îÄ‚îÄ GameOverPopup.gd       # –õ–æ–≥–∏–∫–∞ Game Over (–ù–û–í–û–ï)
    ‚îú‚îÄ‚îÄ BaccaratRules.gd       # –ü—Ä–∞–≤–∏–ª–∞ –±–∞–∫–∫–∞—Ä–∞
    ‚îú‚îÄ‚îÄ CardTextureManager.gd  # –ú–µ–Ω–µ–¥–∂–µ—Ä —Ç–µ–∫—Å—Ç—É—Ä –∫–∞—Ä—Ç
    ‚îú‚îÄ‚îÄ StatsManager.gd        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    ‚îú‚îÄ‚îÄ SaveManager.gd         # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ LimitsManager.gd       # –õ–∏–º–∏—Ç—ã —Å—Ç–æ–ª–∞
    ‚îú‚îÄ‚îÄ UIManager.gd           # UI –º–µ–Ω–µ–¥–∂–µ—Ä
    ‚îú‚îÄ‚îÄ ToastManager.gd        # –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ Localization.gd        # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
    ‚îî‚îÄ‚îÄ states/                # State Machine
        ‚îú‚îÄ‚îÄ State.gd
        ‚îú‚îÄ‚îÄ StartState.gd
        ‚îú‚îÄ‚îÄ DealingState.gd
        ‚îú‚îÄ‚îÄ CardsDealtState.gd
        ‚îú‚îÄ‚îÄ PlayerCardOpenedState.gd
        ‚îî‚îÄ‚îÄ RevealedState.gd
```

---

## üîß –ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è

### 1. PayoutPopup - –°–∏—Å—Ç–µ–º–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ–∏—à–µ–∫

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù—É–∂–Ω–æ –±—ã–ª–æ —Å–æ–∑–¥–∞—Ç—å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Å—Ç–µ–∫–æ–≤ —Ñ–∏—à–µ–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –∏ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–π —É–ø–∞–∫–æ–≤–∫–æ–π.

**–†–µ—à–µ–Ω–∏–µ**:
- **–ö–ª–∞—Å—Å ChipStack**: –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–ª–∞—Å—Å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- **AtlasTexture**: –ø–æ–∫–∞–∑ —Ç–æ–ª—å–∫–æ –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ –ø–æ–ª–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–µ–∫–∞
- **Anchor-based –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: —Å—Ç–µ–∫–∏ —Ä–∞—Å—Ç—É—Ç –≤–≤–µ—Ä—Ö –æ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –Ω–∏–∂–Ω–µ–π —Ç–æ—á–∫–∏
- **Slot —Å–∏—Å—Ç–µ–º–∞**: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ—Ç–æ–≤ (6 –∏–ª–∏ 10) —Å `ALIGNMENT_END`
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**: `_find_sorted_position()` –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ
- **–ö–æ–º–ø–∞–∫—Ç–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞**: –≤—Å–µ–≥–¥–∞ –∑–∞–ø–æ–ª–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å—Ç–µ–∫, —É–¥–∞–ª—è–µ–º –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å—Ç–µ–∫–∞

**–ö–æ–¥**:
```gdscript
class ChipStack:
    const MAX_CHIPS = 20
    const BASE_WIDTH = 96
    const BASE_HEIGHT = 336
    var scale: float = 1.0

    func update_scale(new_scale: float):
        # –ü—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

    func _update_visual():
        # AtlasTexture - –ø–æ–∫–∞–∑ –Ω—É–∂–Ω–æ–π —á–∞—Å—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        var display_height = (full_height * count) / MAX_CHIPS
        var y_start = full_height - display_height
        atlas_texture.region = Rect2(0, y_start, width, display_height)
```

### 2. Survival Mode - –†–µ–∂–∏–º –≤—ã–∂–∏–≤–∞–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–µ—Ä—é –∂–∏–∑–Ω–µ–π –≤–æ –≤—Å–µ –º–µ—Å—Ç–∞ —Å –æ—à–∏–±–∫–∞–º–∏, –Ω–µ –Ω–∞—Ä—É—à–∞—è —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.

**–†–µ—à–µ–Ω–∏–µ**:
- **–°—Å—ã–ª–∫–∞ –Ω–∞ GameController** –≤ GamePhaseManager —á–µ—Ä–µ–∑ `set_game_controller()`
- **–ú–µ—Ç–æ–¥ `on_error_occurred()`**: –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –ø–æ—Ç–µ—Ä–∏ –∂–∏–∑–Ω–∏
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ States**: –≤—ã–∑–æ–≤ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ `stats.increment_error()`

**–ö–æ–¥**:
```gdscript
# GamePhaseManager.gd
func on_error_occurred() -> void:
    if game_controller and game_controller.is_survival_mode:
        game_controller.survival_ui.lose_life()

# CardsDealtState.gd
context.stats.increment_error("natural_draw")
context.on_error_occurred()  # ‚Üê –ü–æ—Ç–µ—Ä—è –∂–∏–∑–Ω–∏
```

### 3. State Machine –¥–ª—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

**–ü–∞—Ç—Ç–µ—Ä–Ω State** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —á—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–æ —Ñ–∞–∑–∞–º –∏–≥—Ä—ã:
- `StartState` ‚Üí `DealingState` ‚Üí `CardsDealtState` ‚Üí `PlayerCardOpenedState` ‚Üí `RevealedState`

–ö–∞–∂–¥–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–Ω–∞–µ—Ç —Å–≤–æ–∏ –ø—Ä–∞–≤–∏–ª–∞ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã.

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–µ—Å—Å–∏–∏:
- `scripts/PayoutPopup.gd` - 400+ —Å—Ç—Ä–æ–∫ (–ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞)
- `scenes/PayoutPopup.tscn` - –Ω–æ–≤—ã–π layout
- `scripts/SurvivalModeUI.gd` - 78 —Å—Ç—Ä–æ–∫
- `scenes/SurvivalModeUI.tscn` - UI —Å 7 —Å–µ—Ä–¥–µ—á–∫–∞–º–∏
- `scripts/GameOverPopup.gd` - 15 —Å—Ç—Ä–æ–∫
- `scenes/GameOverPopup.tscn` - Game Over —ç–∫—Ä–∞–Ω

### –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `GameController.gd` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–µ–∂–∏–º–∞ –≤—ã–∂–∏–≤–∞–Ω–∏—è
- `GamePhaseManager.gd` - –º–µ—Ç–æ–¥ `on_error_occurred()`
- `CardsDealtState.gd` - 8 —Ç–æ—á–µ–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- `PlayerCardOpenedState.gd` - 2 —Ç–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- `StatsManager.gd` - –º–µ—Ç–æ–¥ `reset()`
- `SaveManager.gd` - –º–µ—Ç–æ–¥ `reset_stats()`
- `Game.tscn` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —É–∑–ª—ã

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

1. ‚úÖ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤—ã–ø–ª–∞—Ç** —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π —Å—Ç–µ–∫–æ–≤
2. ‚úÖ **–†–µ–∂–∏–º –≤—ã–∂–∏–≤–∞–Ω–∏—è** –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º
3. ‚úÖ **–ü–æ–ª–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è** (RU/EN)
4. ‚úÖ **–¢–æ—á–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª –±–∞–∫–∫–∞—Ä–∞**
5. ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫** —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
6. ‚úÖ **–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** —Å State Machine
7. ‚úÖ **–í–∏–∑—É–∞–ª—å–Ω–æ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π UI**

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –æ–±—É—á–µ–Ω–∏—é –¥–∏–ª–µ—Ä–æ–≤. –†–µ–∂–∏–º –≤—ã–∂–∏–≤–∞–Ω–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –Ω–∞–≤—ã–∫–æ–≤.

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –¥–ª—è –±—É–¥—É—â–∏—Ö –¥–æ—Ä–∞–±–æ—Ç–æ–∫

–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è):
- –¢–∞–π–º–µ—Ä –≤ —Ä–µ–∂–∏–º–µ –≤—ã–∂–∏–≤–∞–Ω–∏—è (5 —Å–µ–∫—É–Ω–¥ –Ω–∞ —ç—Ç–∞–ø)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∫–æ—Ä–¥–æ–≤ –≤ —Ä–µ–∂–∏–º–µ –≤—ã–∂–∏–≤–∞–Ω–∏—è
- –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫
- –†–µ–∂–∏–º –æ–±—É—á–µ–Ω–∏—è —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 2025-11-18
**–í–µ—Ä—Å–∏—è**: 5.9
**–î–≤–∏–∂–æ–∫**: Godot 4.5
**–Ø–∑—ã–∫**: GDScript

---

‚ú® **–ü—Ä–æ–µ–∫—Ç –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ!** ‚ú®
