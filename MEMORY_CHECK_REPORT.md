# üß† –û–¢–ß–Å–¢: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

**–î–∞—Ç–∞:** 2025-11-21
**–≠—Ç–∞–ø:** 4.2 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–¢–ï–ß–ï–ö –ù–ï–¢

---

## üìã –ü–†–û–í–ï–†–ï–ù–ù–´–ï –§–ê–ô–õ–´

### 1. ChipStackManager.gd ‚úÖ
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–æ–ø–æ–∫ —Ñ–∏—à–µ–∫

**–ü–∞—Ç—Ç–µ—Ä–Ω:**
```gdscript
if stack.container.get_parent():
    slot.remove_child(stack.container)

if is_instance_valid(stack.container):
    stack.container.queue_free()
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–¥–∏—Ç–µ–ª—è –∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º

---

### 2. ToastManager.gd + Toast.gd ‚úÖ
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–ü–∞—Ç—Ç–µ—Ä–Ω:**
```gdscript
// ToastManager.gd
var toast = TOAST_SCENE.instantiate()
container.add_child(toast)
toast.show_message(text, duration)

// Toast.gd
var tween = create_tween()
tween.tween_callback(queue_free)  // –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ Toast —É–¥–∞–ª—è–µ—Ç —Å–µ–±—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ callback

---

### 3. Dust.gd ‚úÖ
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ê–Ω–∏–º–∞—Ü–∏–æ–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –ø—ã–ª–∏

**–ü–∞—Ç—Ç–µ—Ä–Ω:**
```gdscript
func play_dust_1_card(callback: Callable):
    # ... –∞–Ω–∏–º–∞—Ü–∏—è ...
    queue_free()  // –£–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏—è
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –£–¥–∞–ª—è–µ—Ç —Å–µ–±—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏

---

### 4. HelpPopup.gd ‚úÖ
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –û—á–∏—Å—Ç–∫–∞ –¥–æ—á–µ—Ä–Ω–∏—Ö —É–∑–ª–æ–≤ –ø—Ä–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü—ã

**–ü–∞—Ç—Ç–µ—Ä–Ω:**
```gdscript
for child in table_grid.get_children():
    child.queue_free()
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–æ—á–µ—Ä–Ω–∏—Ö —É–∑–ª–æ–≤

---

### 5. PayoutPopup.gd ‚úÖ
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –û—á–∏—Å—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫ —Ñ–∏—à–µ–∫ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–∂–∏–º–∞

**–ü–∞—Ç—Ç–µ—Ä–Ω:**
```gdscript
for child in chip_fleet_container.get_children():
    child.queue_free()
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–æ—á–µ—Ä–Ω–∏—Ö —É–∑–ª–æ–≤

---

### 6. Autoload –°–∏–Ω–≥–ª—Ç–æ–Ω—ã ‚úÖ
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ:** SaveManager, StatsManager, ToastManager

**–ü–∞—Ç—Ç–µ—Ä–Ω:**
```gdscript
static var instance: ClassName

func _init():
    if instance == null:
        instance = self
    else:
        queue_free()
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ Singleton pattern - —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –≤ –ø–∞–º—è—Ç–∏

---

## ‚úÖ –ò–¢–û–ì–ò

**–í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ:** 9 —Ñ–∞–π–ª–æ–≤
**–£—Ç–µ—á–µ–∫ –Ω–∞–π–¥–µ–Ω–æ:** 0
**Orphan nodes:** 0 (–æ–∂–∏–¥–∞–µ—Ç—Å—è)

### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–µ–∑–¥–µ:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `get_parent()` –ø–µ—Ä–µ–¥ `remove_child()`
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `is_instance_valid()` –ø–µ—Ä–µ–¥ `queue_free()`
3. ‚úÖ –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `tween.tween_callback(queue_free)`
4. ‚úÖ Singleton pattern –¥–ª—è autoload
5. ‚úÖ –û—á–∏—Å—Ç–∫–∞ –¥–æ—á–µ—Ä–Ω–∏—Ö —É–∑–ª–æ–≤ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ–º

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –û—Ç–ª–∏—á–Ω–æ–µ! –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –ø–∞–º—è—Ç—å—é.

**–î–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- Object pooling –¥–ª—è Toast (–ó–∞–¥–∞—á–∞ 4.3)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ orphan nodes –≤ production

---

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** Claude Code
**–î–∞—Ç–∞:** 2025-11-21
